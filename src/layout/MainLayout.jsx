import React, { useState } from "react";
import Header from "../components/common/header";
import Navbar from "../components/common/navbar";
import { useLocation } from "react-router-dom";

const MainLayout = ({ children, title }) => {
  const location = useLocation();
  const [headerTitle, setHeaderTitle] = useState(title);

  const handleNavItemClick = (title) => {
    setHeaderTitle(title);
  };

  return (
    <div>
      <Header title={headerTitle} />
      <Navbar 
        navItems={[
          {
            title: "Dashboard",
            path: "/dashboard",
            icon: (
              <>
                <svg
                  width="17"
                  height="18"
                  viewBox="0 0 17 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_420_608)">
                    <path
                      d="M1.0625 1.5625V16.4375H6.375C6.31966 16.6146 6.26709 16.7917 6.21729 16.9688C6.16748 17.1458 6.12044 17.3229 6.07617 17.5H0V0.5H14.875V6.65088C14.6813 6.67855 14.4987 6.72282 14.3271 6.78369C14.1556 6.84456 13.984 6.92757 13.8125 7.03271V1.5625H1.0625ZM17.0083 9.58105C17.0083 9.79688 16.9668 10.0072 16.8838 10.2119C16.8008 10.4167 16.6818 10.5965 16.5269 10.7515L10.5752 16.7031L7.4458 17.4834L8.22607 14.354L14.1777 8.41064C14.3382 8.25016 14.5153 8.13119 14.709 8.05371C14.9027 7.97624 15.1157 7.9375 15.3481 7.9375C15.5806 7.9375 15.7964 7.979 15.9956 8.06201C16.1948 8.14502 16.3719 8.25846 16.5269 8.40234C16.6818 8.54622 16.798 8.72054 16.8755 8.92529C16.953 9.13005 16.9972 9.34863 17.0083 9.58105ZM15.9458 9.58105C15.9458 9.40397 15.8905 9.26286 15.7798 9.15771C15.6691 9.05257 15.5252 9 15.3481 9C15.2707 9 15.196 9.01107 15.124 9.0332C15.0521 9.05534 14.9884 9.09684 14.9331 9.15771L9.18896 14.9019L8.90674 16.0225L10.0273 15.7402L15.7715 10.0044C15.8877 9.88818 15.9458 9.74707 15.9458 9.58105ZM12.75 7.9375H2.125V2.6416H12.75V7.9375ZM3.1875 3.6875V6.875H11.6875V3.6875H3.1875ZM3.1875 13.25H7.4541L7.24658 13.4575C7.18018 13.5239 7.10547 13.5959 7.02246 13.6733C6.99479 13.784 6.96989 13.8919 6.94775 13.9971C6.92562 14.1022 6.89795 14.2074 6.86475 14.3125H2.125V9H11.7041L10.6333 10.0625H3.1875V13.25Z"
                      fill={
                        location.pathname == "/dashboard"
                          ? "#009294"
                          : "#212427"
                      }
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_420_608">
                      <rect
                        width="17"
                        height="17"
                        fill="white"
                        transform="translate(0 0.5)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </>
            ),
          },
          {
            title: "Prescription",
            path: "/generate-prescription",
            isActive: false,
            icon: (
              <>
                <svg
                  width={19}
                  height={21}
                  viewBox="0 0 19 21"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M13.373 19.188L14.869 17.673L12.442 15.246L10.927 16.742C10.5783 17.0907 10.404 17.4983 10.404 17.965C10.404 18.4317 10.5783 18.8393 10.927 19.188C11.2757 19.5373 11.6833 19.712 12.15 19.712C12.6167 19.712 13.0243 19.5373 13.373 19.188ZM15.558 16.985L17.073 15.488C17.4217 15.1393 17.593 14.7317 17.587 14.265C17.5803 13.7983 17.4027 13.3907 17.054 13.042C16.7053 12.706 16.3007 12.535 15.84 12.529C15.38 12.5223 14.9757 12.6933 14.627 13.042L13.131 14.558L15.558 16.985ZM14.068 19.902C13.528 20.442 12.8853 20.7087 12.14 20.702C11.3953 20.6953 10.753 20.4287 10.213 19.902C9.68633 19.362 9.41967 18.7197 9.413 17.975C9.40633 17.2303 9.673 16.588 10.213 16.048L13.933 12.328C14.4597 11.8013 15.102 11.538 15.86 11.538C16.6173 11.538 17.2597 11.8013 17.787 12.328C18.327 12.868 18.597 13.5107 18.597 14.256C18.597 15.0007 18.327 15.643 17.787 16.183L14.068 19.902ZM1.615 18C1.16833 18 0.787333 17.8427 0.472 17.528C0.157333 17.2133 0 16.8323 0 16.385V3.615C0 3.16833 0.157333 2.78733 0.472 2.472C0.786667 2.15733 1.16767 2 1.615 2H6.315C6.22433 1.49 6.34667 1.029 6.682 0.617C7.01733 0.205667 7.45667 0 8 0C8.55667 0 9.00267 0.205667 9.338 0.617C9.67267 1.029 9.78833 1.49 9.685 2H14.385C14.8317 2 15.2127 2.15733 15.528 2.472C15.8427 2.78667 16 3.16767 16 3.615V8.798C15.8333 8.77867 15.6667 8.77533 15.5 8.788C15.3333 8.80133 15.1667 8.82 15 8.844V3.615C15 3.43567 14.9423 3.28833 14.827 3.173C14.7117 3.05767 14.5643 3 14.385 3H1.615C1.43567 3 1.28833 3.05767 1.173 3.173C1.05767 3.28833 1 3.43567 1 3.615V16.385C1 16.5643 1.05767 16.7117 1.173 16.827C1.28833 16.9423 1.43567 17 1.615 17H6.748C6.71067 17.1667 6.68567 17.3333 6.673 17.5C6.65967 17.6667 6.663 17.8333 6.683 18H1.615ZM8 2.442C8.21667 2.442 8.396 2.37133 8.538 2.23C8.68 2.08867 8.75067 1.90933 8.75 1.692C8.75 1.47533 8.679 1.29633 8.537 1.155C8.395 1.01367 8.216 0.942667 8 0.942C7.78333 0.942 7.60433 1.013 7.463 1.155C7.32167 1.297 7.25067 1.476 7.25 1.692C7.25 1.90867 7.321 2.088 7.463 2.23C7.605 2.372 7.784 2.44267 8 2.442ZM3.5 6.731V5.731H12.5V6.731H3.5ZM3.5 10.5V9.5H12.5V9.908C12.4053 9.978 12.318 10.048 12.238 10.118C12.158 10.188 12.0703 10.2703 11.975 10.365L11.84 10.5H3.5ZM3.5 14.27V13.27H9.071L8.788 13.552C8.668 13.672 8.55067 13.7917 8.436 13.911C8.32067 14.029 8.20867 14.1483 8.1 14.269L3.5 14.27Z"
                    fill={
                      location.pathname == "/generate-prescription"
                        ? "#009294"
                        : "#212427"
                    }
                  />
                </svg>
              </>
            ),
          },
          {
            title: "Appointed Patients",
            path: "/appointed-Patients",
            isActive: false,
            icon: (
              <>
                <svg
                  width="19"
                  height="20"
                  viewBox="0 0 19 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_420_615)">
                    <path
                      d="M1.99263 3.15716C1.64027 3.15716 1.30235 3.29714 1.05319 3.54629C0.804037 3.79545 0.664063 4.13338 0.664062 4.48574V17.1072C0.664063 17.4595 0.804037 17.7975 1.05319 18.0466C1.30235 18.2958 1.64027 18.4357 1.99263 18.4357H16.6069C16.9593 18.4357 17.2972 18.2958 17.5464 18.0466C17.7955 17.7975 17.9355 17.4595 17.9355 17.1072V4.48574C17.9355 4.13338 17.7955 3.79545 17.5464 3.54629C17.2972 3.29714 16.9593 3.15716 16.6069 3.15716H13.9498M4.64978 1.16431V5.15002M13.9498 1.16431V5.15002M4.64978 3.15716H11.2926"
                      stroke={
                        location.pathname == "/appointed-Patients"
                          ? "#009294"
                          : "#212427"
                      }
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M8.22068 6.56091C8.04451 6.56091 7.87554 6.6309 7.75096 6.75548C7.62639 6.88006 7.5564 7.04902 7.5564 7.2252V9.09317H5.68577C5.50959 9.09317 5.34063 9.16316 5.21605 9.28774C5.09147 9.41231 5.02148 9.58128 5.02148 9.75746V11.9164C5.02148 12.0926 5.09147 12.2615 5.21605 12.3861C5.34063 12.5107 5.50959 12.5807 5.68577 12.5807H7.55507V14.4486C7.55507 14.6248 7.62506 14.7938 7.74963 14.9184C7.87421 15.0429 8.04318 15.1129 8.21936 15.1129H10.3783C10.4655 15.1129 10.5519 15.0957 10.6325 15.0624C10.7131 15.029 10.7863 14.98 10.848 14.9184C10.9097 14.8567 10.9586 14.7834 10.992 14.7029C11.0254 14.6223 11.0426 14.5359 11.0426 14.4486V12.5807H12.9105C13.0867 12.5807 13.2557 12.5107 13.3803 12.3861C13.5048 12.2615 13.5748 12.0926 13.5748 11.9164V9.75746C13.5748 9.58128 13.5048 9.41231 13.3803 9.28774C13.2557 9.16316 13.0867 9.09317 12.9105 9.09317H11.0439V7.2252C11.0439 7.04902 10.9739 6.88006 10.8493 6.75548C10.7248 6.6309 10.5558 6.56091 10.3796 6.56091H8.22068Z"
                      stroke={
                        location.pathname == "/appointed-Patients"
                          ? "#009294"
                          : "#212427"
                      }
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_420_615">
                      <rect
                        width="18.6"
                        height="18.6"
                        fill={
                          location.pathname == "/dashboard"
                            ? "#009294"
                            : "#212427"
                        }
                        transform="translate(0 0.5)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </>
            ),
          },
          {
            title: "All Patient",
            path: "/all-Patient",
            isActive: false,
            icon: (
              <>
                <svg
                  width="18"
                  height="17"
                  viewBox="0 0 18 17"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0 12.2333V9.03333H3.2V12.2333H0ZM1.06667 10.1V11.1667H2.13333V10.1H1.06667ZM0 7.96667V4.76667H3.2V7.96667H0ZM1.06667 5.83333V6.9H2.13333V5.83333H1.06667ZM0 3.7V0.5H3.2V3.7H0ZM1.06667 1.56667V2.63333H2.13333V1.56667H1.06667ZM5.33333 6.9V5.83333H14.9333V6.9H5.33333ZM12.8 10.1V11.1667H5.33333V10.1H12.8ZM5.33333 1.56667H17.0667V2.63333H5.33333V1.56667ZM0 16.5V13.3H3.2V16.5H0ZM1.06667 14.3667V15.4333H2.13333V14.3667H1.06667ZM5.33333 15.4333V14.3667H14.9333V15.4333H5.33333Z"
                    fill={
                      location.pathname == "/all-Patient"
                        ? "#009294"
                        : "#212427"
                    }
                  />
                </svg>
              </>
            ),
          },
          {
            title: "Prescription Archive",
            path: "/prescription-Archive",
            isActive: false,
            icon: (
              <>
                <svg
                  width="19"
                  height="17"
                  viewBox="0 0 19 17"
                  fill={
                    location.pathname == "/prescription-Archive"
                      ? "#009294"
                      : "#212427"
                  }
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0.0664062 2.5C0.0664062 1.396 0.962406 0.5 2.06641 0.5H16.3521C17.4561 0.5 18.3521 1.396 18.3521 2.5V4.21429C18.3521 4.74472 18.1414 5.25343 17.7663 5.6285C17.3913 6.00357 16.8826 6.21429 16.3521 6.21429H2.06641C1.53597 6.21429 1.02727 6.00357 0.652193 5.6285C0.27712 5.25343 0.0664063 4.74472 0.0664063 4.21429L0.0664062 2.5ZM2.06641 7.35714C2.29373 7.35714 2.51175 7.44745 2.6725 7.60819C2.83324 7.76894 2.92355 7.98696 2.92355 8.21429V14.5C2.92355 14.6577 3.05155 14.7857 3.20926 14.7857H15.2093C15.285 14.7857 15.3577 14.7556 15.4113 14.702C15.4649 14.6484 15.495 14.5758 15.495 14.5V8.21429C15.495 7.98696 15.5853 7.76894 15.746 7.60819C15.9068 7.44745 16.1248 7.35714 16.3521 7.35714C16.5795 7.35714 16.7975 7.44745 16.9582 7.60819C17.119 7.76894 17.2093 7.98696 17.2093 8.21429V14.5C17.2093 15.0304 16.9986 15.5391 16.6235 15.9142C16.2484 16.2893 15.7397 16.5 15.2093 16.5H3.20926C2.67883 16.5 2.17012 16.2893 1.79505 15.9142C1.41998 15.5391 1.20926 15.0304 1.20926 14.5V8.21429C1.20926 7.98696 1.29957 7.76894 1.46031 7.60819C1.62106 7.44745 1.83908 7.35714 2.06641 7.35714ZM2.06641 2.21429C1.99063 2.21429 1.91796 2.24439 1.86438 2.29797C1.81079 2.35155 1.78069 2.42422 1.78069 2.5V4.21429C1.78069 4.372 1.90869 4.5 2.06641 4.5H16.3521C16.4279 4.5 16.5006 4.4699 16.5542 4.41632C16.6077 4.36273 16.6378 4.29006 16.6378 4.21429V2.5C16.6378 2.42422 16.6077 2.35155 16.5542 2.29797C16.5006 2.24439 16.4279 2.21429 16.3521 2.21429H2.06641ZM7.20926 8.5H11.2093C11.4366 8.5 11.6546 8.59031 11.8154 8.75105C11.9761 8.9118 12.0664 9.12982 12.0664 9.35714C12.0664 9.58447 11.9761 9.80249 11.8154 9.96323C11.6546 10.124 11.4366 10.2143 11.2093 10.2143H7.20926C6.98194 10.2143 6.76392 10.124 6.60317 9.96323C6.44243 9.80249 6.35212 9.58447 6.35212 9.35714C6.35212 9.12982 6.44243 8.9118 6.60317 8.75105C6.76392 8.59031 6.98194 8.5 7.20926 8.5Z"
                    fill={
                      location.pathname == "/prescription-Archive"
                        ? "#009294"
                        : "#212427"
                    }
                  />
                </svg>
              </>
            ),
          },
        ]}
        onNavItemClick={handleNavItemClick}
      />
      <main className="bg-white">{children}</main>
    </div>
  );
};

export default MainLayout;
